<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>THE FRONK SHOW</title>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;900&display=swap" rel="stylesheet" />

    <style>
        body { font-family: 'Poppins', sans-serif; background:#000; color:#fff; margin:0; position: relative; }
        h1,h2 { font-weight:900; }
        h1 { font-size:3rem; white-space: nowrap; }
        #hero { text-align:center; padding:3rem 1rem; }
        #hero img { width:200px; height:auto; display:block; margin:1rem auto; }
        #live-billboard { background:#111; border:10px solid #ccc; border-radius:20px; max-width:600px; margin:2rem auto; padding:2rem; text-align:center; }
        #live-billboard.live { border-color:red; box-shadow:0 0 20px red; }
        #live-billboard p { white-space: nowrap; font-size: 0.9rem; }
        #countdown { font-size:2rem; font-weight:900; color:red; min-height:2.5rem; }
        .watch-btn { display:inline-block; padding:1rem 3rem; border-radius:50px; text-decoration:none; font-weight:700; background:#888; color:#fff; cursor:not-allowed; }
        .watch-btn.live { background:red; cursor:pointer; }
        #youtube-section, #instagram-follow { background:#111; border-radius:20px; margin:2rem auto; max-width:600px; text-align:center; }
        #youtube-section a, #instagram-follow a { display: block; padding: 2rem; text-decoration: none; color: #fff; }
        #youtube-logo, #instagram-logo { width:30px; height:30px; }
        #youtube-section span, #instagram-follow span { font-weight: 900; }
        #latest-tiktoks h2 { text-align: center; }
        footer { background:#111; text-align:center; padding:1rem; }
        @media (max-width: 600px) {
            #live-billboard p { font-size: 0.8rem; }
        }

        /* Video Background Styles */
        #bg-video {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover; /* Ensures video covers the screen without distortion */
            z-index: -2; /* Behind all content */
        }
        #bg-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5); /* Semi-transparent black overlay for readability */
            z-index: -1; /* Behind content but over video */
        }

        /* Fallback for mobile: Hide video and use static background image */
        @media (max-width: 768px) {
            #bg-video {
                display: none;
            }
            body {
                background-image: url('https://raw.githubusercontent.com/thefronky/loopbackground/main/poster.jpg'); /* Upload a poster.jpg to your repo */
                background-size: cover;
                background-position: center;
                background-repeat: no-repeat;
                background-attachment: fixed;
            }
        }
    </style>
</head>
<body>
    <!-- Background Video -->
    <video id="bg-video" autoplay loop muted playsinline poster="https://raw.githubusercontent.com/thefronky/loopbackground/main/poster.jpg">
        <source src="https://raw.githubusercontent.com/thefronky/loopbackground/main/website%20video.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    <!-- Overlay for Readability -->
    <div id="bg-overlay"></div>

    <section id="hero">
        <h1>THE FRONK SHOW</h1>
        <p id="hosted-by">hosted by</p>
        <img src="https://raw.githubusercontent.com/thefronky/pfp/main/Fronk%20pfp%20transparent%20background.png?raw=1" alt="FRONK Logo" />
    </section>

    <section id="live-section">
        <div id="live-billboard">
            <div id="countdown"></div>
            <a id="watch-link" class="watch-btn">ENTER</a>
            <p>Every night 7:30 PM PT / 10:30 PM ET to 9:00 PM PT / 12:00 AM ET on TikTok Live.</p>
        </div>
    </section>

    <section id="youtube-section">
        <a href="https://www.youtube.com/@the_fronk" target="_blank">
            <img id="youtube-logo" src="https://upload.wikimedia.org/wikipedia/commons/0/09/YouTube_full-color_icon_%282017%29.svg" alt="YouTube" />
            <span>Full Replays of The Fronk Show on YouTube</span>
        </a>
    </section>

    <section id="instagram-follow">
        <a href="https://www.instagram.com/thefronky" target="_blank">
            <img id="instagram-logo" src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Instagram" />
            <span>Check out Fronk's Unhinged Stories on Instagram</span>
        </a>
    </section>

    <section id="latest-tiktoks">
        <h2>FRONK VIDEO OF THE DAY</h2>
        <div id="tiktok-card">
            <blockquote class="tiktok-embed" cite="https://www.tiktok.com/@thefronk/video/7542332113819929870" data-video-id="7542332113819929870" style="max-width:400px;min-width:300px;">
                <section>
                    <a target="_blank" href="https://www.tiktok.com/@thefronk">@thefronk</a> CHAOS = #BEST #SERIES WITH #FRONK & @Petro 
                </section>
            </blockquote>
            <script async src="https://www.tiktok.com/embed.js"></script>
        </div>
    </section>

    <footer>&copy; 2025 THE FRONK SHOW. All rights reserved.</footer>

    <script>
        // Attempt to play video on user interaction for mobile
        document.addEventListener('touchstart', function() {
            var video = document.getElementById('bg-video');
            if (video.paused) {
                video.play().catch(function(error) {
                    console.log('Video play failed:', error);
                });
            }
        }, { once: true });

        let currentMessage = "";
        let interval;
        let isAnimating = false;

        function commonPrefix(str1, str2) {
            let minLen = Math.min(str1.length, str2.length);
            let i = 0;
            while (i < minLen && str1[i] === str2[i]) {
                i++;
            }
            return i;
        }

        function animateTransition(oldText, newText) {
            let prefixLen = commonPrefix(oldText, newText);
            isAnimating = true;
            let cd = document.getElementById('countdown');
            let currentLen = oldText.length;
            cd.textContent = oldText + '|';

            let backSteps = currentLen - prefixLen;
            let typeSteps = newText.length - prefixLen;
            let totalSteps = backSteps + typeSteps;
            const TRANSITION_TIME = 10000; // 10 seconds for transition
            let charDelay = totalSteps > 0 ? TRANSITION_TIME / totalSteps : 0;

            if (backSteps > 0) {
                // Backspace to prefix
                let k = currentLen;
                interval = setInterval(() => {
                    if (k > prefixLen) {
                        cd.textContent = oldText.slice(0, k - 1) + '|';
                        k--;
                    } else {
                        clearInterval(interval);
                        typeSuffix(newText, prefixLen);
                    }
                }, charDelay);
            } else {
                typeSuffix(newText, prefixLen);
            }

            function typeSuffix(newText, prefixLen) {
                let suffix = newText.slice(prefixLen);
                let suffixLen = suffix.length;
                let j = 0;
                cd.textContent = newText.slice(0, prefixLen) + '|';
                if (suffixLen === 0) {
                    cd.textContent = newText;
                    isAnimating = false;
                    return;
                }
                interval = setInterval(() => {
                    if (j < suffixLen) {
                        cd.textContent = newText.slice(0, prefixLen + j + 1) + '|';
                        j++;
                    } else {
                        clearInterval(interval);
                        cd.textContent = newText;
                        isAnimating = false;
                    }
                }, charDelay);
            }
        }

        function startAnimationSequence() {
            isAnimating = true;
            backspaceToEmpty(() => {
                typeFromEmpty(currentMessage, () => {
                    isAnimating = false;
                });
            });
        }

        function backspaceToEmpty(callback) {
            const BACK_TIME = 25000; // 25 seconds
            let cd = document.getElementById('countdown');
            let text = cd.textContent.replace(/\|$/, '');
            let len = text.length;
            if (len === 0) {
                callback();
                return;
            }
            let delay = BACK_TIME / len;
            cd.textContent = text + '|';
            let i = len;
            interval = setInterval(() => {
                if (i > 0) {
                    i--;
                    cd.textContent = text.slice(0, i) + '|';
                } else {
                    clearInterval(interval);
                    cd.textContent = '';
                    callback();
                }
            }, delay);
        }

        function typeFromEmpty(text, callback) {
            const TYPE_TIME = 25000; // 25 seconds
            let cd = document.getElementById('countdown');
            let len = text.length;
            if (len === 0) {
                callback();
                return;
            }
            let delay = TYPE_TIME / len;
            cd.textContent = '|';
            let i = 0;
            interval = setInterval(() => {
                if (i < len) {
                    cd.textContent = text.slice(0, i + 1) + '|';
                    i++;
                } else {
                    clearInterval(interval);
                    cd.textContent = text;
                    callback();
                }
            }, delay);
        }

        function getNextShowET(now) {
            let etNow = new Date(now.toLocaleString("en-US", { timeZone: "America/New_York" }));
            let next = new Date(etNow);
            next.setHours(22, 30, 0, 0);
            if (etNow > next) next.setDate(next.getDate() + 1);
            return next;
        }

        function updateCountdown() {
            let now = new Date();
            let etNow = new Date(now.toLocaleString("en-US", { timeZone: "America/New_York" }));
            let start = getNextShowET(now);
            let end = new Date(start.getTime() + 90 * 60000);
            let billboard = document.getElementById('live-billboard');
            let watchLink = document.getElementById('watch-link');
            let cd = document.getElementById('countdown');
            let newMsg = "";
            let isLive = etNow >= start && etNow < end;
            if (isLive) {
                newMsg = "LIVE NOW!";
                billboard.classList.add('live');
                watchLink.classList.add('live');
                watchLink.href = 'https://www.tiktok.com/@thefronk/live';
            } else {
                let diff = start - etNow;
                let h = Math.floor(diff / 3600000);
                let m = Math.floor((diff % 3600000) / 60000);
                if (h) newMsg += h + " hour" + (h > 1 ? "s" : "");
                if (h && m) newMsg += " and ";
                if (m) newMsg += m + " minute" + (m > 1 ? "s" : "");
                if (!newMsg) newMsg = "less than a minute";
                billboard.classList.remove('live');
                watchLink.classList.remove('live');
                watchLink.removeAttribute('href');
            }

            if (newMsg !== currentMessage) {
                let oldText = cd.textContent.replace(/\|$/, '');
                clearInterval(interval);
                animateTransition(oldText, newMsg);
                currentMessage = newMsg;
            }

            let seconds = etNow.getSeconds();
            if (!isLive && (seconds < 5 || seconds >= 55)) {
                if (!isAnimating) {
                    cd.textContent = currentMessage;
                }
            } else if (!isLive) {
                if (!isAnimating) {
                    clearInterval(interval);
                    startAnimationSequence();
                }
            } else {
                // During live, keep static
                if (!isAnimating) {
                    cd.textContent = currentMessage;
                }
            }
        }

        updateCountdown();
        setInterval(updateCountdown, 1000);

        // TikTok fallback
        window.addEventListener('load', () => {
            setTimeout(() => {
                const card = document.getElementById('tiktok-card');
                if (card && !card.querySelector('iframe')) {
                    const btn = document.createElement('a');
                    btn.href = 'https://www.tiktok.com/@thefronk/video/7542332113819929870';
                    btn.target = '_blank';
                    btn.textContent = 'Watch on TikTok';
                    btn.className = 'watch-btn live';
                    card.appendChild(btn);
                }
            }, 2000);
        });
    </script>
</body>
</html>
